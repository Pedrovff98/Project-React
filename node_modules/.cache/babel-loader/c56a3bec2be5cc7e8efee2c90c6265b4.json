{"ast":null,"code":"import _toConsumableArray from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/pedro/projectReact/my-app/node_modules/@babel/runtime/regenerator/index.js\";import{Component}from'react/index.js';import'./styles.css';import{Posts}from'../../components/Posts';import{loadPosts}from'../.././Utils/load-post';import{Button}from'../../components/Button';import{TextInput}from'../../components/TextInput';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={counter:0,posts:[],allPosts:[],page:0,postsPerPage:53,searchValue:''};_this.loadsPost=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,page,postsPerPage,postAndPhotos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,page=_this$state.page,postsPerPage=_this$state.postsPerPage;_context.next=3;return loadPosts();case 3:postAndPhotos=_context.sent;_this.setState({posts:postAndPhotos.slice(page,postsPerPage),allPosts:postAndPhotos});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.loadMorePosts=function(){var _this$state2=_this.state,page=_this$state2.page,postsPerPage=_this$state2.postsPerPage,allPosts=_this$state2.allPosts,posts=_this$state2.posts;var nextPage=page+postsPerPage;var nextPosts=allPosts.slice(nextPage,nextPage+postsPerPage);posts.push.apply(posts,_toConsumableArray(nextPosts));_this.setState({posts:posts,page:nextPage});};_this.handleChange=function(e){var value=e.target.value;_this.setState({searchValue:value});};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.loadsPost();case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this$state3=this.state,posts=_this$state3.posts,page=_this$state3.page,postsPerPage=_this$state3.postsPerPage,allPosts=_this$state3.allPosts,searchValue=_this$state3.searchValue;var noMorePosts=page+postsPerPage>=allPosts.length;var filteredPosts=!!searchValue?allPosts.filter(function(post){return post.title.toLowerCase().includes(searchValue.toLocaleLowerCase());}):posts;return/*#__PURE__*/_jsxs(\"section\",{className:\"container\",children:[!!searchValue&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Search value: \",searchValue]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(TextInput,{searchValue:searchValue,handleChange:this.handleChange}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),filteredPosts.length>0&&/*#__PURE__*/_jsx(Posts,{posts:filteredPosts}),filteredPosts.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"N\\xE3o existem posts \"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:!searchValue&&/*#__PURE__*/_jsx(Button,{text:\"Load more posts\",onClick:this.loadMorePosts// apenas definindo uma props \n,disabled:noMorePosts})})]});}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["/home/pedro/projectReact/my-app/src/templates/Home/index.jsx"],"names":["Component","Posts","loadPosts","Button","TextInput","Home","state","counter","posts","allPosts","page","postsPerPage","searchValue","loadsPost","postAndPhotos","setState","slice","loadMorePosts","nextPage","nextPosts","push","handleChange","e","value","target","noMorePosts","length","filteredPosts","filter","post","title","toLowerCase","includes","toLocaleLowerCase"],"mappings":"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","sourcesContent":["import { Component } from 'react/index.js'\n\nimport './styles.css';\n\nimport { Posts } from '../../components/Posts';\n\nimport { loadPosts } from '../.././Utils/load-post'\n\nimport { Button } from '../../components/Button';\nimport { TextInput } from '../../components/TextInput';\n\n export class Home extends Component {\n  state = {\n\n    counter:0,\n    posts: [],\n    allPosts:[],\n    page: 0,\n    postsPerPage: 53,\n    searchValue: ''\n\n  };\n\n  async componentDidMount(){\n\n     await this.loadsPost();\n\n  }\n\n  loadsPost = async () => {\n    const { page, postsPerPage } = this.state;\n\n    const postAndPhotos = await loadPosts();\n\n    this.setState({\n\n      posts: postAndPhotos.slice(page, postsPerPage), \n      allPosts: postAndPhotos,\n\n    });\n   }\n\n   loadMorePosts = () => {\n     const {\n       page,\n       postsPerPage,\n       allPosts,\n       posts\n     } = this.state;\n\n     const nextPage = page + postsPerPage;\n     const nextPosts = allPosts.slice(nextPage, nextPage + postsPerPage );\n     posts.push(...nextPosts);\n\n     this.setState({posts, page: nextPage});\n\n   }\n\n   handleChange = (e) => {\n     const {value} = e.target;\n     this.setState({searchValue:value})\n   }\n\n  render() {\n\n    const {posts, page, postsPerPage, allPosts,searchValue} = this.state;\n    const noMorePosts = page + postsPerPage >= allPosts.length;\n\n    const filteredPosts = !!searchValue ?\n\n    allPosts.filter(post =>{\n      return post.title.toLowerCase().includes(\n        searchValue.toLocaleLowerCase());\n    })\n    :posts;\n\n    return (\n      <section className=\"container\">\n        {!!searchValue && (\n          <>\n          <h1>Search value: {searchValue}</h1>\n          <br />\n          <br />\n          </>\n        )}\n\n        <TextInput\n          searchValue = {searchValue}\n          handleChange ={this.handleChange}\n        />\n        <br />\n        <br />\n        <br />\n\n        {filteredPosts.length > 0 &&(\n          <Posts posts = {filteredPosts} />\n        )}\n        \n        {filteredPosts.length === 0 &&(\n          <p>NÃ£o existem posts </p>\n        )}\n\n        <div className=\"button-container\">\n          {!searchValue && (\n             <Button \n             text = 'Load more posts'\n             onClick = {this.loadMorePosts} // apenas definindo uma props \n             disabled = {noMorePosts}\n             />\n          )}\n       \n        </div>\n      </section>\n\n    );\n  }\n}\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}